{% extends 'base.html' %}
{% block content %}

<style>
    .settings-card {
        border-radius: 20px;
        background: #ffffff;
        transition: 0.2s ease;
    }
    .settings-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 18px rgba(0,0,0,0.15) !important;
    }

    h3.fw-bold {
        text-align: center;
        color: #0a2a66;
    }

    .btn-primary {
        background-color: #154cdb;
        border-color: #154cdb;
        border-radius: 50px;
        padding: 10px 0;
    }
    .btn-primary:hover {
        background-color: #0a2a66;
        border-color: #0a2a66;
    }
    .btn-danger {
        border-radius: 50px;
        padding: 10px 0;
    }
</style>

<h3 class="fw-bold mb-4">Backup & Recovery</h3>

<div class="row g-4 justify-content-center">

    <!-- Backup Database -->
    <div class="col-md-4">
        <div class="card shadow-sm border-0 p-4 settings-card">
            <h5 class="fw-bold mb-1 text-primary">Backup Database</h5>
            <p class="text-muted small mb-3">
                Download a full backup of your barangay database.
            </p>

            <a href="{{ url_for('backup_database') }}" class="btn btn-primary mt-3 w-100">
                Download Backup
            </a>
        </div>
    </div>

    <!-- Restore Database -->
    <div class="col-md-4">
        <div class="card shadow-sm border-0 p-4 settings-card">
            <h5 class="fw-bold mb-1 text-primary">Restore Database</h5>
            <p class="text-muted small mb-3">
                Upload a .db file and restore your data safely.
            </p>

            <form action="{{ url_for('restore_database') }}" method="POST" enctype="multipart/form-data">
                <input type="file" name="db_file" class="form-control mb-3" required>
                <button class="btn btn-primary w-100">Restore</button>
            </form>
        </div>
    </div>

    <!-- System Reset -->
    <div class="col-md-4">
        <div class="card shadow-sm border-0 p-4 settings-card">
            <h5 class="fw-bold mb-1 text-danger">Reset Barangay System</h5>
            <p class="text-muted small mb-3">
                Reset the system to a clean state. Users will be preserved.
            </p>

            <form action="{{ url_for('reset_database') }}" method="POST">
                <button class="btn btn-danger w-100"
                        onclick="return confirm('WARNING: This will wipe ALL data except users! Continue?')">
                    Reset System
                </button>
            </form>
        </div>
    </div>

</div>

{% endblock %}
