{% extends "base.html" %}
{% block content %}

<div class="container mt-4">
    <h3 class="text-center mb-4">Edit {{ rtype|capitalize }} Record</h3>

    <form method="POST">
        <div class="row">
            {% for field in fields %}
                {% if field.name != 'id' and field.name != 'status' %}
                <div class="{{ field.col }} mb-3">
                    <label class="form-label">{{ field.name.replace('_', ' ')|title }}</label>

                    {% if field.type == 'select' %}
                        <select name="{{ field.name }}" class="form-control" {% if field.required %}required{% endif %}>
                            <option value="">Select {{ field.name.replace('_',' ')|title }}</option>
                            {% for option in field.options %}
                                <option value="{{ option }}" {% if record[field.name] == option %}selected{% endif %}>{{ option }}</option>
                            {% endfor %}
                        </select>
                    {% else %}
                        <input type="{{ field.type }}" 
                               name="{{ field.name }}" 
                               class="form-control"
                               value="{{ record[field.name] }}" 
                               {% if field.required %}required{% endif %}>
                    {% endif %}
                </div>
                {% endif %}
            {% endfor %}
        </div>

        <button type="submit" class="btn btn-primary mt-3">Save Changes</button>
        <a href="{{ url_for('view_' + rtype) }}" class="btn btn-secondary mt-3">Cancel</a>
    </form>
</div>

{% endblock %}
